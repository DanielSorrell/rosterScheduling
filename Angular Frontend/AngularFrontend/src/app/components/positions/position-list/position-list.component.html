<div *ngIf="isLoading; else loaded" class="row h-75 w-100">
  <div class="my-auto">
    <div class="justify-content-center text-center">
      <p>Loading positions...</p>
    </div>
    <div class="d-flex justify-content-center">
      <mat-spinner></mat-spinner>
    </div>
  </div>
</div>

<ng-template #loaded>
  <div class="container my-5">
    <h1 class="mb-3">Positions</h1>

    <div *ngIf="error" (click)="closeErrorMessage()" class="alert alert-danger alert-dismissible errorOnHover">
      <span>{{this.errorMessage}}</span>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <table class="table table-striped">
      <thead class="stickyHeader">
        <tr>
          <th>Title</th>
          <th>Pay (hourly)</th>
          <th class="text-center mx-auto">
            Employees
            <span>
              <img src="assets/userIcon.png" alt="user" width="30px" height="30px">
            </span>
          </th>
          <th> </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let position of positions">
          <td>{{position.position.title}}</td>
          <td>${{position.position.rate}}</td>
          <td class="text-center">{{position.empCount}}</td>
          <td><button (click)="updatePosition(position.position.title)" type="button" class="btn btn-primary">Update</button></td>
        </tr>
      </tbody>
    </table>
  </div>

</ng-template>
